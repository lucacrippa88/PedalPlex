<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/carbon-components/css/carbon-components.min.css" />
    <link rel="stylesheet" href="style.css">

<title>Pedal Builder</title>



<button id="openCreate">Open Pedal Builder</button>
<script>
document.getElementById('openCreate').addEventListener('click', async () => {
    // Fetch the HTML content of create.html
    const response = await fetch('create.html');
    let html = await response.text();

    // Remove <html>, <head>, <body> tags to avoid nesting issues
    html = html.replace(/<!DOCTYPE html>/gi, '')
               .replace(/<html[^>]*>/gi, '')
               .replace(/<\/html>/gi, '')
               .replace(/<head[^>]*>[\s\S]*<\/head>/gi, '')
               .replace(/<body[^>]*>/gi, '')
               .replace(/<\/body>/gi, '');

    // Open SweetAlert2 modal
    Swal.fire({
        title: 'Pedal Builder',
        html: `<div id="swal-builder-container" style="text-align:left; overflow:auto; max-height:80vh;">${html}</div>`,
        width: '90%',
        showCloseButton: true,
        showConfirmButton: false,
        didOpen: () => {
            const container = document.getElementById('swal-builder-container');

            // Dynamically load utils.js
            const utilsScript = document.createElement('script');
            utilsScript.src = 'utils.js';
            container.appendChild(utilsScript);

            // Then dynamically load create.js
            const createScript = document.createElement('script');
            createScript.src = 'create.js';
            container.appendChild(createScript);
        }
    });
});
</script>


</body>
</html>
